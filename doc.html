
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=iso-8859-2"/>
<title>Projekt IIS</title>
<style type="text/css">
    table { border-collapse: collapse; }
    td, th { border: 1px solid black; padding: 0.3em 0.5em; text-align: left; }
    dt { font-weight: bold; margin-top: 0.5em; }

    .use-case {
        margin: 40px 0;
        height: 800px;
        width: auto;
    }

    .er {
        margin: 40px 0;
        height: 1000px;
        width: auto;
    }

    code {
        background: #ebebeb;
        padding: 0 5px;
        color: #f00;
    }

    .lm {
        margin-left: 10px;
    }
</style>
</head>
<body>

<h1>Testy: tvorba, plnìní a hodnocení testových zkou¹ek</h1>

<dl>
<dt>Autoøi</dt>
<dd>Boris ©trbák (xstrba05)
    <a href="mailto:xstrba05@vutbr.cz">xstrba05@vutbr.cz</a> -
    Vedení týmu, code review, implementace správy testù, vyplòování testù. pøihla¹ování studentù a asistentù, pøihla¹ování do a odhla¹ování z aplikace, nasazení aplikac.
</dd>
<dd>Filip Bartoník (xbarto98)
    <a href="mailto:xbarto98@stud.fit.vutbr.cz">xbarto98@stud.fit.vutbr.cz</a> -
    ER - diagram, use case diagram, frontend aplikace.
</dd>
<dd>Samuel Lí¹ka (xliska20)
    <a href="mailto:206818@vutbr.cz">206818@vutbr.cz</a> -
    ER - diagram, správa u¾ivatelù, vytvoøení tabulek, seeder u¾ivatelù, nìkteré javascriptové funkce frontendu.
</dd>
<dt>URL aplikace</dt>
<dd><a href="https://xstrba05.site" target="_blank">https://xstrba05.site</a></dd>
</dl>

<h2>U¾ivatelé systému pro testování</h2>

<table>
<tr><th>Login</th><th>Heslo</th><th>Role</th></tr>
<tr><td>root</td><td>123456</td><td>Administrátor</td></tr>
<tr><td>arowe</td><td>123456</td><td>Profesor</td></tr>
<tr><td>garrison02</td><td>123456</td><td>Asistent</td></tr>
<tr><td>horace07</td><td>123456</td><td>Student</td></tr>
</table>

<img src="./doc/use-case.png" alt="Diagram pípadï¿½ uï¿½ití" class="use-case">

<h2>Implementace</h2>

<h4>Dùle¾ité slo¾ky projektu:</h4>
<p>
    <li><strong>app</strong> - obsahuje implementaci hlavních funkcí systému</li>
    <li><strong>config</strong> - obsahuje konfiguraci aplikace</li>
    <li><strong>database</strong> - soubory pro vytvoøení tabulek (slo¾ka <strong>migrations</strong>) a slo¾ka
    pro vytvoøenï¿½ prvontích záznamù(<strong>seeds</strong>)</li>
    <li><strong>public</strong> - vstupní bod aplikace (<strong>index.php</strong>), javascript, css, fonty...</li>
    <li><strong>resources</strong> - obsahuje pøeklady, nezkompilované assety (vue, js, sass) a html templaty (.blade.php soubory).</li>
    <li><strong>routes</strong> - obsahuje mapování endpointù aplikace na funkce tøíd, které je zpracovávají</li>
    <li><strong>storage</strong> - ve slo¾ce app jsou nahrané soubory u¾ivateli aplikace, ve slo¾ce framework jsou zacachované soboury aplikace a ve slo¾ce logs jsou chybová hlá¹ení</li>
</p>

<h4>Jádro systému - slo¾ka <strong>app</strong></h4>
<div class="lm">
    <h5>Contracts</h5>
    <p>Rozhraní repozitáøù a trait</p>

    <h5>Enums</h5>
    <p>Enumerátory (Krajiny, role, povolení, jazyky...)</p>

    <h5>Models</h5>
    <p>Modely reprezentujíci tabulky databáze. Dr¾í data tabulek a poskytují rozhraní pro jejich získanú a modifikaci</p>

    <h5>Parents</h5>
    <p>Rodièovské tøídy. Obsahující implementace spoloèních funkcí pou¾ívaných v¹emi podtøídami a ka¾dá tøída implementována v rámci systému by mìla dìdit od nìjaké tøídy v této slo¾ce (nebo dìdice dané tøídy).</p>

    <h5>Providers</h5>
    <p>Tøídy, které inicializují základní funkce aplikace. Nejdùle¾itìj¹í jsou <code>RouteServiceProvider</code> pro incializaci rout aplikace, <code>RepositoriesServiceProvider</code> pro bindovaní rozhraní repozitáøù na konkrétní tøídy (dùle¾ité pro dependency injections) a <code>AuthServiceProvider</code> pro mapovaní policies (viz. níe) na modely.</p>

    <h5>Queries</h5>
    <p>Tøídy obsahujíci pomocné funkce pro vytvoøení queries do databáze a pro filtrováni dat databáze.</p>

    <h5>
        Repositories
    </h5>
    <p>Tøídy, které poskytují dal¹í úroveò abstrakce pro získaní a modifikovaní dat databáze.</p>

    <h5>Services</h5>
    <p>Tøídy poskytujíci pomocné funkce vyu¾ívané zejména kontolerama. Napøíklad pro získaní pøihlá¹eneho u¾ivatele, ukládaní base64 øetìzcù nebo Inicializaci boèního panelu.</p>

    <h5>Sidebar</h5>
    <p>Tøídy reprezentujíci boèní panel a polo¾ky boèního panelu.</p>

    <h5>Tables</h5>
    <p>Obsahuje tøídy tabulek pou¾ívaných systémem. Ka¾dá tøída obsahuje funkce pro inicializaci sloupcù a filtrù, filtraci dat, vyhledávaní v datech a transformaci kolekce modelù do pole pro frontend.</p>

    <h5>Http</h5>
    <div class="lm">
        <h5>Requests</h5>
        <p>Obsahuje tøídy, které slou¾í pro validaci dat poslaných v tìlech requestù.</p>

        <h5>Policies</h5>
        <p>Tøídy pro definování povolení pro jednotlivé u¾ivatele. Ka¾dá tøída obsahuje metody: create, show, edit, delete. Tøída <code>TestPolicy</code> navíc obsahuje metody pro autorizaci use case pøípadù jako pøihlá¹eni na test, schválení studenta, asistenta a podobnì. Ka¾dá metoda dostane jako paramter u¾ivatele a model, pro který je potøeba danou akci autorizovat. Vrací true nebo false.</p>

        <h5>Middleware</h5>
        <p>Tøídy, které jsou inicializovány a spou¹tìny pøed samotným zpracovánim requestu v kontroleru. V¹echny jsou v pùvodním stavu (pøi inicializaci aplikace laravelu), proto¾e nebylo potøeba nic mìnit.</p>

        <h5>Controllers</h5>
        <p>Tøídy zpracovávajíci jednotlivé requesty (pøípady u¾ití). Ve slo¾ce <code>Auth</code> jsou implementovány funkce pro pøihla¹ování ve tøídì <code>LoginController</code>. Ostatní tøídy jsou v pùvodním stavu, proto¾e dané funkce systém neposkytuje nebo to nebylo potøeba mìnit. Byly ale ponechány pro pøípad budoucího vyu¾ití.</p>

        <ul>
            <li><code>GroupController</code> - kontroler zpracováva dotazy na vytvoøení, aktualizaci a vymazáni skupin v rámci jednoho testu.</li>

            <li><code>HomeController</code> - zpracováva dotaz na domovskou stánku aplikace (Úvod)</li>

            <li><code>MediaController</code> - zpracováva dotaz na soubor ze storage</li>

            <li><code>MyTestsController</code> - zpracováva dotazy na stránku "Moje testy" a dotazy na json data testù a filtrù pro tabulku s testami.</li>

            <li><code>QuestionSolutionController</code> - kontroler pro aktualizaci øe¹ení otázky.</li>

            <li><code>TestAssistantController</code> - kontroler zpracovávajíci dotazy na pøihlá¹ení se na test jako asistent, schválení asistenta a odstrnánení asistenta.</li>

            <li><code>TestController</code> - kontoler zpracovávajíci dotazy pro vytvoøení, akutalizaci, zmazáni, obnovení a zobrazení testù, pro získaní dat a filtrù tabulky testù a pro zobrazení odpovídajícich stránek.</li>

            <li><code>TestSolutionController</code> - zpracováva dotazy pro zaèatí testu, zobrazení øe¹ení testu, ukonèení testu, zobrazení øe¹ení u¾ivatele, ulo¾ení hodnocení testu.</li>

            <li><code>TestStudentsController</code> - kontroler zpracovávajíci dotazy na pøihlá¹ení se na test jako student, schválení studenta a odstrnánení studenta.</li>

            <li><code>UserController</code> - kontoler zpracovávajíci dotazy pro vytvoøení, akutalizaci, zmazáni, obnovení a zobrazení u¾ivatele, zobrazení a aktualizaci profilu u¾ivatele, pro získaní dat a filtrù tabulky u¾ivatelù a pro zobrazení odpovídajícich stránek.</li>
        </ul>
    </div>
</div>

<h3>Databáze</h3>

<img src="./doc/er.png" alt="Relaèní model databáze" class="er">

<h2>Instalace</h2>

<h4>Po¾adavky</h4>

<ul>
    <li><strong>PHP</strong> >= 7.4.0</li>
    <li><strong>BCMath PHP</strong> roz¹íøeni</li>
    <li><strong>Ctype PHP</strong> roz¹íøeni</li>
    <li><strong>Fileinfo PHP</strong> roz¹íøeni</li>
    <li><strong>JSON PHP</strong> roz¹íøeni</li>
    <li><strong>Mbstring PHP</strong> roz¹íøeni</li>
    <li><strong>OpenSSL PHP</strong> roz¹íøeni</li>
    <li><strong>PDO PHP</strong> roz¹íøeni</li>
    <li><strong>Tokenizer PHP</strong> roz¹íøeni</li>
    <li><strong>XML PHP</strong> roz¹íøeni</li>

    <li>nainstalován <strong>Node js</strong></li>
    <li>nainstalováno <strong>NPM</strong></li>
    <li>nainstalován <strong>Composer</strong></li>
</ul>

<h4>Instalace</h4>

<p>Po rozbalení je potøeba v rozbaleném adresáøi pustit pøíkaz <code>composer i</code> pro nainstalování v¹ech
potøebných balíèkù Laravelu.</p>
<p>Pøíkazem <code>npm i</code> se nainstalují v¹echny balíky pro kompilaci frontendu.</p>
<p>Pøíkazem <code>npm run dev</code> (nebo na produkci <code>npm run prod</code>) se zkompilují styly a javascriptové soubory do adresáøe public.</p>
<p>Pak je potøeba zkopírovat soubor <code>.env.example</code> do souboru <code>.env</code> a nastavit potøebné parametry:
<ul>
    <li>APP_NAME=Tìsto</li>
    <li>APP_ENV=local nebo APP_ENV=production</li>
    <li>APP_DEBUG=true nebo APP_DEBUG=false</li>
    <li>APP_URL=https://example.com</li>
    <li>DB_DATABASE="jméno databáze"</li>
    <li>DB_USERNAME="jméno u¾ivatele databáze"</li>
    <li>DB_PASSWORD="heslo u¾ivatele databáze"</li>
</ul>
<p>Pøípadnì jiné parametry.</p>
<p>Po nastavení <code>.env</code> souboru je potøeba pustit pøíkaz <code>php artisan key:generate</code>, který do souboru pøidá polo¾ku <code>APP_KEY</code></p>
<p>Tabulky databáze se vytvoøí pøíkazem <code>php artisan migrate</code> popøípadì <code>php artisan migrate -seed</code>, který rovnou i naplní nìkteré tabulky datami. V pøípadì prvního pøíkazu je pak potøeba pustit <code>php artisan db:seed</code></p>
<p>Takté¾ je potøeba nastavit práva soborùm. To se èasto lí¹i od serveru ale nejïèastìji je potøeba nastavit <code>chmod 755</code> na sobory <code>public a storage</code> a takisto zmìnit jejich skupinu na www-data.</p>



<h2>Známé problémy</h2>
<p>Implementovány by mìli být v¹echny èásti projektu. Z èasových dùvodu jsme ale neimplementovali výbìr role pøi pøihlá¹ení do systému (podobnì jako v informaèním systému fitu) ale systém automaticky detekuje roli pøihlá¹eného u¾ivatele. Takisto jsme pøipravovali systém pro anglicky i èesky jazyk ale implementovali jsme jenom èesky. Nìkterá chybová hlá¹ení nemusí být správnì pøelo¾ena.</p>

</body>
</html>
